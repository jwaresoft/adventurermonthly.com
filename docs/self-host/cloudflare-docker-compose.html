<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-self-host/cloudflare-docker-compose" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">With Cloudflare &amp; Docker Compose | Adventurer Monthly</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://adventurermonthly.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://adventurermonthly.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://adventurermonthly.com/docs/self-host/cloudflare-docker-compose"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="With Cloudflare &amp; Docker Compose | Adventurer Monthly"><meta data-rh="true" name="description" content="An alternative to port forwarding utilizing cloudflare tunnels and a docker installation on a local machine."><meta data-rh="true" property="og:description" content="An alternative to port forwarding utilizing cloudflare tunnels and a docker installation on a local machine."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://adventurermonthly.com/docs/self-host/cloudflare-docker-compose"><link data-rh="true" rel="alternate" href="https://adventurermonthly.com/docs/self-host/cloudflare-docker-compose" hreflang="en"><link data-rh="true" rel="alternate" href="https://adventurermonthly.com/docs/self-host/cloudflare-docker-compose" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.57bf3cec.css">
<link rel="preload" href="/assets/js/runtime~main.a685a932.js" as="script">
<link rel="preload" href="/assets/js/main.357fe767.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.128.webp" alt="Adventurer Monthly Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.128.webp" alt="Adventurer Monthly Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Adventurer Monthly</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/guides">Guides</a><a href="https://github.com/adventurermonthly?tab=repositories" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><img src="/svg/candle-light.svg" width="32px" height="32px" class="lightToggleIcon_pyhR"><img src="/svg/candle-dark.svg" width="32px" height="32px" class="darkToggleIcon_wfgR"></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides">Guides</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/self-hosting-guides">Self Hosting Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Self Hosting Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/self-host/cloudflare-docker-compose">With Cloudflare &amp; Docker Compose</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/game-system-automation">Game System Automation</a><button aria-label="Toggle the collapsible sidebar category &#x27;Game System Automation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/general-advice--useful-links">General Advice &amp; Useful Links</a><button aria-label="Toggle the collapsible sidebar category &#x27;General Advice &amp; Useful Links&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/self-hosting-guides"><span itemprop="name">Self Hosting Guides</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">With Cloudflare &amp; Docker Compose</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Foundry SelfHost With Cloudflare &amp; Docker Compose</h1><img loading="lazy" src="/img/guides-img/flying-whales.webp" class="guide-img-600 img_ev3q"><p>An alternative to port forwarding utilizing cloudflare tunnels and a docker installation on a local machine.</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p><strong>USE AT YOUR OWN RISK!!</strong></p><p>These guides are presented as is with no waranty, expectation of security, or anything like that.  These are simply guides for how someone who has contributed to this github projected has set something up.  They do not come with security audits, stats, dashboards, metrics, or ANY promises of being up to date or safe and secure to begin with.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-setup-a-cloudflare-account">1. Setup a Cloudflare Account<a href="#1-setup-a-cloudflare-account" class="hash-link" aria-label="Direct link to 1. Setup a Cloudflare Account" title="Direct link to 1. Setup a Cloudflare Account">​</a></h2><p>If you don&#x27;t already have one, <a href="https://dash.cloudflare.com/sign-up" target="_blank" rel="noopener noreferrer">sign up</a> for one.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-purchase-or-transfer-a-domain-name">2. Purchase or Transfer a Domain Name<a href="#2-purchase-or-transfer-a-domain-name" class="hash-link" aria-label="Direct link to 2. Purchase or Transfer a Domain Name" title="Direct link to 2. Purchase or Transfer a Domain Name">​</a></h2><p>This is the domain (or a subdomain of this domain) where your instance will be available online.  You only need one domain if you plan to run multiple foundry instances as you will be able to assign subdomains when setting up tunnel(s) in a later step.  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2a-if-you-already-purchased-a-domain-elsewhere">2.a If You Already Purchased A Domain Elsewhere...<a href="#2a-if-you-already-purchased-a-domain-elsewhere" class="hash-link" aria-label="Direct link to 2.a If You Already Purchased A Domain Elsewhere..." title="Direct link to 2.a If You Already Purchased A Domain Elsewhere...">​</a></h3><p>There are a few steps to setup your domain with cloudflare if you purchased it elsewhere.</p><p>Before you can set up your tunnel, you will need to <a href="https://developers.cloudflare.com/dns/zone-setups/full-setup/setup/" target="_blank" rel="noopener noreferrer">add a site and configure cloudflare domain servers</a>.</p><p>These are the prereqs you will see in the <a href="https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/install-and-setup/tunnel-guide/local/#prerequisites" target="_blank" rel="noopener noreferrer">tunnel docs</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2b-if-you-would-like-to-just-buy-one-at-cloudflare">2.b If You Would Like To Just Buy One At Cloudflare<a href="#2b-if-you-would-like-to-just-buy-one-at-cloudflare" class="hash-link" aria-label="Direct link to 2.b If You Would Like To Just Buy One At Cloudflare" title="Direct link to 2.b If You Would Like To Just Buy One At Cloudflare">​</a></h3><p>You can register a new domain name with <a href="https://developers.cloudflare.com/registrar/get-started/register-domain/" target="_blank" rel="noopener noreferrer">Cloudflare Registrar</a>.</p><p>You will want to <a href="https://developers.cloudflare.com/fundamentals/setup/account-setup/add-site/" target="_blank" rel="noopener noreferrer">add a site</a> in either case as I believe it is a required step for the tunnel.  I cannot confirm if registering a domain through Cloudflare sets up a site or not as I already had a domain and thus did 2.a.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-setup-a-new-tunnel">3. Setup a new Tunnel<a href="#3-setup-a-new-tunnel" class="hash-link" aria-label="Direct link to 3. Setup a new Tunnel" title="Direct link to 3. Setup a new Tunnel">​</a></h2><p>This can be done either through <strong>Cloudflare&#x27;s WebUI</strong> or for those prefering the command line, the <strong>Cloudflare CLI</strong>.  Up to date instructions for both can be found in <a href="https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/get-started/" target="_blank" rel="noopener noreferrer">Cloudflare&#x27;s create your first tunnel docs</a>.</p><p>If you are uncomfortable with the command line I would recommend <a href="https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/get-started/create-remote-tunnel/" target="_blank" rel="noopener noreferrer">Setting up a tunnel through the web dashboard</a> as it is point and click.  I have provided a few notes below to help clarify the cloudflare instructions for those new to all of this.</p><ul><li>you can hold off on steps <strong>1.5</strong> and <strong>1.6</strong>  until after you have everything set up.</li><li>you <em>will</em> ideally want to keep your tunnel token from these steps, and keep it somewhere <strong>SAFE</strong> like a password manager.  If you do not, you can always log in and access it later by editing the existing tunnel.</li><li>for the hostname of this (and any tunnel you set up for use with the docker compose setup below) you can use <code>foundry:30000</code>.  This is explained more in the Docker Compose steps.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-docker-compose">4. Docker Compose<a href="#4-docker-compose" class="hash-link" aria-label="Direct link to 4. Docker Compose" title="Direct link to 4. Docker Compose">​</a></h2><p>You will want to install docker, and docker compose (now comes bundled with docker) in order to run foundry with the cloudflare daemon.  If you are new to docker and docker compose, there are some (hopefully) helpful links and snippets in <a href="/docs/general/docker">the Docker General Info / Links section</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-install-docker--docker-compose">4.1 Install Docker &amp; Docker Compose<a href="#41-install-docker--docker-compose" class="hash-link" aria-label="Direct link to 4.1 Install Docker &amp; Docker Compose" title="Direct link to 4.1 Install Docker &amp; Docker Compose">​</a></h3><p>Install docker for your desktop environment using the steps below.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP"><div style="verticle-align:middle"><img loading="lazy" src="/svg/windows.svg" width="24px" class="img_ev3q"> Windows</div></li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP"><div style="verticle-align:middle"><img loading="lazy" src="/svg/apple.svg" width="24px" class="img_ev3q"> Mac</div></li><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active"><div style="verticle-align:middle"><img loading="lazy" src="/svg/linux.svg" width="24px" class="img_ev3q"> Linux</div></li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6" hidden=""><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-install-docker--docker-compose-on-windows">HOW TO: Install Docker &amp; Docker Compose On Windows<a href="#how-to-install-docker--docker-compose-on-windows" class="hash-link" aria-label="Direct link to HOW TO: Install Docker &amp; Docker Compose On Windows" title="Direct link to HOW TO: Install Docker &amp; Docker Compose On Windows">​</a></h2><p>  <a href="https://docs.docker.com/desktop/install/windows-install/" target="_blank" rel="noopener noreferrer">Install Docker Desktop On Windows</a> -- This will install the docker desktop GUI and docker compose for Windows.</p>  </div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-install-docker--docker-compose-on-macos">HOW TO: Install Docker &amp; Docker Compose On MacOS<a href="#how-to-install-docker--docker-compose-on-macos" class="hash-link" aria-label="Direct link to HOW TO: Install Docker &amp; Docker Compose On MacOS" title="Direct link to HOW TO: Install Docker &amp; Docker Compose On MacOS">​</a></h2><p>  <a href="https://docs.docker.com/desktop/install/mac-install/" target="_blank" rel="noopener noreferrer">Install Docker Desktop On Mac OS</a> -- This will install the docker desktop GUI and docker compose for Mac OS.</p>  </div><div role="tabpanel" class="tabItem_Ymn6"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-install-docker--docker-compose-on-linux">HOW TO: Install Docker &amp; Docker Compose On Linux<a href="#how-to-install-docker--docker-compose-on-linux" class="hash-link" aria-label="Direct link to HOW TO: Install Docker &amp; Docker Compose On Linux" title="Direct link to HOW TO: Install Docker &amp; Docker Compose On Linux">​</a></h2><p>  <a href="https://docs.docker.com/desktop/install/linux-install/" target="_blank" rel="noopener noreferrer">Install <strong>Docker Desktop</strong> On Linux (Debian, Ubuntu, Fedora)</a> -- This will install the docker desktop GUI and docker compose for Linux (Debian, Ubuntu, Fedora).</p><p>  <a href="https://docs.docker.com/engine/install/" target="_blank" rel="noopener noreferrer">Install <strong>Docker Engine</strong> on Linux</a> -- This will install docker engine and compose on your machine.  This is the CLI only option for those who do not want / need the docker desktop client.  This includes instructions for the three distros listed above as well as many others.</p>  </div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-clone--download-the-docker-config">4.2 Clone / Download the Docker Config.<a href="#42-clone--download-the-docker-config" class="hash-link" aria-label="Direct link to 4.2 Clone / Download the Docker Config." title="Direct link to 4.2 Clone / Download the Docker Config.">​</a></h3><p>The <a href="https://github.com/jwaresoft/foundry-cloudflared" target="_blank" rel="noopener noreferrer">foundry-cloudflared repo</a> contains <code>the docker-compose.yml</code> necessary to run this.  You can either clone it or if you are unfamiliar with git, download the repo as a zip by clicking the <strong>Code</strong> dropdown button.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="43-populate-settings-files">4.3 Populate Settings Files.<a href="#43-populate-settings-files" class="hash-link" aria-label="Direct link to 4.3 Populate Settings Files." title="Direct link to 4.3 Populate Settings Files.">​</a></h3><p>you will not need to change the docker-compose.yml file itself, unless you want to override the default volume.  You WILL need to create a directory and 3 files.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="env">.env<a href="#env" class="hash-link" aria-label="Direct link to .env" title="Direct link to .env">​</a></h4><p>Create a file called <code>.env</code> in the directory with the <code>docker-compose.yml</code> file.  Use your favorite / any text editor to add the following to it:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">VERSION=</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where the value is the version number you would like to pin to.  For example, for version 11.307, you would create</p><p>EXAMPLE</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">VERSION=11.307</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will keep the docker container at the version specified.  To update in the future, you simply need to stop the docker compose setup, update this file, and start it again.  It will update on boot.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="envdfoundry">./env.d/foundry<a href="#envdfoundry" class="hash-link" aria-label="Direct link to ./env.d/foundry" title="Direct link to ./env.d/foundry">​</a></h4><p>Our next two files need to be put in a directory called <code>env.d</code> so you will want to create that at the project root now.  Then create a file in the <code>env.d</code> directory called <code>foundry</code> and populate it with the following:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">FOUNDRY_PASSWORD=           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FOUNDRY_USERNAME=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FOUNDRY_ADMIN_KEY=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CONTAINER_PRESERVE_CONFIG=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where</p><ul><li>FOUNDRY_PASSWORD - your password for <a href="https://foundryvtt.com/" target="_blank" rel="noopener noreferrer">https://foundryvtt.com/</a>.</li><li>FOUNDRY_USERNAME - your username for <a href="https://foundryvtt.com" target="_blank" rel="noopener noreferrer">https://foundryvtt.com</a></li><li>FOUNDRY_ADMIN_KEY - set your admin password here for the server.  You can reset it here in the furture as well.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="envdcloudflared">./env.d/cloudflared<a href="#envdcloudflared" class="hash-link" aria-label="Direct link to ./env.d/cloudflared" title="Direct link to ./env.d/cloudflared">​</a></h4><p>Last create another file in <code>env.d</code> called <code>cloudflared</code> and add the following:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TUNNEL_TOKEN=</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where</p><ul><li>TUNNEL_TOKEN - the token for your cloudflare tunnel.  If you didn&#x27;t save it somewhere safe earlier you can get it by logging into cloudflare and clicking edit for the tunnel.  You don&#x27;t need to edit anything, just grab the token value from the code snippet.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="44-optional-copy-foundry-data">4.4 (Optional) Copy Foundry Data<a href="#44-optional-copy-foundry-data" class="hash-link" aria-label="Direct link to 4.4 (Optional) Copy Foundry Data" title="Direct link to 4.4 (Optional) Copy Foundry Data">​</a></h3><p>If you are just going to start fresh you can skip this step.  If you have a bunch of foudry data locally which you would like to copy over, you can do the following:</p><ul><li>create a folder <code>foundry-data</code> at the root of the project.  If you skipped this step and ran the setup, you will already have this directory.</li><li>Copy your <code>Data</code> and/or <code>Config</code> directories from your local foundry directory into <code>foundry-data</code>.  You should be good to go.</li><li>If you would like to backup your server, you can just create a copy of the <code>foundry-data</code> directory at any time and keep it somewhere safe.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="45-run-it">4.5 Run it.<a href="#45-run-it" class="hash-link" aria-label="Direct link to 4.5 Run it." title="Direct link to 4.5 Run it.">​</a></h3><p>To run it, from the root of the directory run </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker compose up</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>in the command line.  I am not sure how to run this from docker desktop directory as I set it up using docker-engine on linux.  I believe you will need to have docker desktop running to have this running.  Google instructions for this and reach out and let us know how it went!</p><p>to shutdown the servers, run </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker compose down</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p><strong>USE AT YOUR OWN RISK!!</strong></p><p>These guides are presented as is with no waranty, expectation of security, or anything like that.  These are simply guides for how someone who has contributed to this github projected has set something up.  They do not come with security audits, stats, dashboards, metrics, or ANY promises of being up to date or safe and secure to begin with.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="permission-denied-running-docker-compose-up">Permission Denied Running `docker compose up&#x27;<a href="#permission-denied-running-docker-compose-up" class="hash-link" aria-label="Direct link to Permission Denied Running `docker compose up&#x27;" title="Direct link to Permission Denied Running `docker compose up&#x27;">​</a></h3><p>This is expected as by default only root can run docker commands.  This note should get you around it.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>If you try to run <code>docker compose up</code> on  linux and get permission denied, there are two remedies.</p><ol><li><p>run <code>sudo docker compose up</code> - by default your user is not added to the docker group and cannot start / stop containers.  Running as root remedies this.</p></li><li><p>Add your user to the docker group.  This is easy and there are instructions in Docker&#x27;s <a href="https://docs.docker.com/engine/install/linux-postinstall/#manage-docker-as-a-non-root-user" target="_blank" rel="noopener noreferrer">Linux post-installation steps for Docker Engine</a>.</p></li></ol></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/category/self-hosting-guides"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Self Hosting Guides</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/category/game-system-automation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Game System Automation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-setup-a-cloudflare-account" class="table-of-contents__link toc-highlight">1. Setup a Cloudflare Account</a></li><li><a href="#2-purchase-or-transfer-a-domain-name" class="table-of-contents__link toc-highlight">2. Purchase or Transfer a Domain Name</a><ul><li><a href="#2a-if-you-already-purchased-a-domain-elsewhere" class="table-of-contents__link toc-highlight">2.a If You Already Purchased A Domain Elsewhere...</a></li><li><a href="#2b-if-you-would-like-to-just-buy-one-at-cloudflare" class="table-of-contents__link toc-highlight">2.b If You Would Like To Just Buy One At Cloudflare</a></li></ul></li><li><a href="#3-setup-a-new-tunnel" class="table-of-contents__link toc-highlight">3. Setup a new Tunnel</a></li><li><a href="#4-docker-compose" class="table-of-contents__link toc-highlight">4. Docker Compose</a><ul><li><a href="#41-install-docker--docker-compose" class="table-of-contents__link toc-highlight">4.1 Install Docker &amp; Docker Compose</a></li><li><a href="#42-clone--download-the-docker-config" class="table-of-contents__link toc-highlight">4.2 Clone / Download the Docker Config.</a></li><li><a href="#43-populate-settings-files" class="table-of-contents__link toc-highlight">4.3 Populate Settings Files.</a></li><li><a href="#44-optional-copy-foundry-data" class="table-of-contents__link toc-highlight">4.4 (Optional) Copy Foundry Data</a></li><li><a href="#45-run-it" class="table-of-contents__link toc-highlight">4.5 Run it.</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#permission-denied-running-docker-compose-up" class="table-of-contents__link toc-highlight">Permission Denied Running `docker compose up&#39;</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.a685a932.js"></script>
<script src="/assets/js/main.357fe767.js"></script>
</body>
</html>